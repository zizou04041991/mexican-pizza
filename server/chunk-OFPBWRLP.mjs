import './polyfills.server.mjs';
import{J as j,O as b,Z as I,ba as g,ca as C,wb as y,xb as l}from"./chunk-3GFJPP5V.mjs";import{a as i,b as f}from"./chunk-T55IDOPT.mjs";var R=Symbol("DEEP_SIGNAL");function x(e){return new Proxy(e,{has(t,n){return!!this.get(t,n,void 0)},get(t,n){let o=y(t);return!W(o)||!(n in o)?(g(t[n])&&t[n][R]&&delete t[n],t[n]):(g(t[n])||(Object.defineProperty(t,n,{value:l(()=>t()[n]),configurable:!0}),t[n][R]=!0),x(t[n]))}})}var T=[WeakSet,WeakMap,Promise,Date,Error,RegExp,ArrayBuffer,DataView,Function];function W(e){if(e===null||typeof e!="object"||A(e))return!1;let t=Object.getPrototypeOf(e);if(t===Object.prototype)return!0;for(;t&&t!==Object.prototype;){if(T.includes(t.constructor))return!1;t=Object.getPrototypeOf(t)}return t===Object.prototype}function A(e){return typeof e?.[Symbol.iterator]=="function"}var F=new WeakMap,a=Symbol("STATE_SOURCE");function d(e,...t){let n=y(()=>P(e)),o=t.reduce((s,u)=>i(i({},s),typeof u=="function"?u(s):u),n),r=e[a],c=Reflect.ownKeys(e[a]);for(let s of Reflect.ownKeys(o))if(c.includes(s)){let u=s;n[u]!==o[u]&&r[u].set(o[u])}U(e)}function P(e){let t=e[a];return Reflect.ownKeys(e[a]).reduce((n,o)=>{let r=t[o]();return f(i({},n),{[o]:r})},{})}function H(e){return F.get(e[a])||[]}function U(e){let t=H(e);for(let n of t){let o=y(()=>P(e));n(o)}}function v(...e){let t=[...e],n=typeof t[0]=="function"?{}:t.shift(),o=t;return(()=>{class c{constructor(){let u=o.reduce((p,O)=>O(p),L()),{stateSignals:m,props:M,methods:z,hooks:E}=u,h=i(i(i({},m),M),z);this[a]=u[a];for(let p of Reflect.ownKeys(h))this[p]=h[p];let{onInit:S,onDestroy:w}=E;S&&S(),w&&b(I).onDestroy(w)}static \u0275fac=function(m){return new(m||c)};static \u0275prov=j({token:c,factory:c.\u0275fac,providedIn:n.providedIn||null})}return c})()}function L(){return{[a]:{},stateSignals:{},props:{},methods:{},hooks:{}}}function N(e){return t=>{let n=e(i(i(i({[a]:t[a]},t.stateSignals),t.props),t.methods));return Reflect.ownKeys(n),f(i({},t),{props:i(i({},t.props),n)})}}function k(e){return N(t=>{let n=e(t);return Reflect.ownKeys(n).reduce((r,c)=>{let s=n[c];return f(i({},r),{[c]:g(s)?s:l(s)})},{})})}function D(e){return t=>{let n=e(i(i(i({[a]:t[a]},t.stateSignals),t.props),t.methods));return Reflect.ownKeys(n),f(i({},t),{methods:i(i({},t.methods),n)})}}function K(e){return t=>{let n=typeof e=="function"?e():e,o=Reflect.ownKeys(n);let r=t[a],c={};for(let s of o)r[s]=C(n[s]),c[s]=x(r[s]);return f(i({},t),{stateSignals:i(i({},t.stateSignals),c)})}}var _={cart:[],client:{name:"",lastName:"",email:"",movil:"",address:"",dni:""}},et=v({providedIn:"root"},K(_),k(({cart:e,client:t})=>({totalItems:l(()=>e().reduce((n,o)=>n+o.count,0)),totalPrice:l(()=>e().reduce((n,o)=>n+o.price*o.count,0)),getCart:l(()=>e()),getClient:l(()=>t())})),D(e=>({addToCart(t){let n=e.cart(),o=n.findIndex(r=>r.id===t.id);if(o>-1){let r=[...n];r[o]=f(i({},r[o]),{count:r[o].count+1}),d(e,{cart:r})}else d(e,{cart:[...n,f(i({},t),{count:1})]})},updateCartItem(t,n){let o=e.cart(),r=o.findIndex(c=>c.id===t);if(r>-1){let c=[...o];c[r]=i(i({},c[r]),n),d(e,{cart:c})}},removeFromCart(t){d(e,{cart:e.cart().filter(n=>n.id!==t)})},updateClient(t){d(e,{client:i(i({},e.client()),t)})},clearCart(){d(e,{cart:[]})}})));export{et as a};
